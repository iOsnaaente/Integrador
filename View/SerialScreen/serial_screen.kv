<SerialScreenView>
    md_bg_color: app.theme_cls.bg_darkest
    #
    # Content 
    #
    MDFloatLayout:
        id: float_content 
        size_hint: 1, 1    
        orientation: 'horizontal'
        #
        # Body 
        #
        MDBoxLayout:
            orientation: 'vertical'
            size_hint: 1, 1
            pos_hint: {'right': 1,'center_y': 0.50}
            # 
            #
            # Upper 
            MDBoxLayout:
                size_hint: 1, 0.5
                orientation: 'horizontal'
                spacing: 10
                padding: 10 
                #
                # Dummy 
                MDLabel:
                    size_hint: None, None
                    size: dp(90), dp(100)
                    md_bg_color:'white'
                    text: "Dummy label"
                #
                # Serial config 
                MDBoxLayout:
                    id: serial
                    size_hint: 0.2, 1     

                #
                # Ploters 
                FloatLayout:
                    id: graph_zone
                    size_hint: 0.75, 1 
                    MDBoxLayout:
                        size_hint: 1, 1
                        spacing: 10
                        pos_hint: {'center_x': 0.50,'center_y': 0.50}
                        #
                        # Azimute Graph 
                        MDFloatLayout:
                            size_hint: 0.5, 1
                            MDCard:    
                                orientation: 'vertical'
                                pos_hint: {'center_x': 0.5,'top': 1.0 }
                                #
                                # Azimute titel 
                                MDLabel: 
                                    size_hint: 1, 0.1
                                    text: 'Azimute'
                                    font_style: 'H3'
                                    font_size: 18
                                    bold: True
                                    halign: 'center'
                                #
                                # Azimute graph 
                                MDBoxLayout:
                                    size_hint: 0.9, 0.9
                                    pos_hint: { 'center_x' : 0.5, 'top' : 0.9 }
                                    md_bg_color: [0,0,0,0]
                                    Graph:
                                        id: azimuth_graph
                                        xlabel: 'Tempo (s)'
                                        ylabel: 'Azimute (º)' 
                                        x_ticks_minor: 5    
                                        x_ticks_major: 10
                                        y_ticks_major: 60
                                        y_grid_label: True
                                        x_grid_label: True
                                        padding: 5
                                        x_grid: True
                                        y_grid: True
                                        xmin: -0
                                        xmax: 100
                                        ymin: 0
                                        ymax: 365
                                #
                                # Azimute Slider 
                                MDBoxLayout:
                                    size_hint: 1, 0.10 
                                    orientation: 'horizontal'
                                    padding: sp(50), sp(10), sp(25), sp(10)
                                    MDIcon:
                                        icon: 'arrow-left'
                                        color: 'gray'
                                        size_hint: 0.1, 1
                                        pos_hint: {'center_x': 0.5,'center_y': 0.5}
                                    
                                    MDSlider:
                                        id: azimuth_graph_slider 
                                        size_hint: 0.8, 1
                                        hint: True
                                        disabled: True
                                        # disabled: False
                                        thumb_color_disabled: "gray"
                                        thumb_color_inactive: 'gray'
                                        track_color_active: "gray"
                                        track_color_inactive: "gray"
                                        step: 0.25
                                        value: 100 
                                        on_value_pos: root.controller.att_azimuth_graph_slider()                                        
                                    MDIcon:
                                        icon: 'arrow-right'
                                        color: 'gray'
                                        size_hint: 0.1, 1
                                        pos_hint: {'center_x': 0.5,'center_y': 0.5}

                            #
                            # Azimute Legenda
                            MDCard: 
                                size_hint: 0.25, 0.15
                                pos_hint: {'right': 0.45,'top': 0.875}
                                orientation: 'vertical'
                                padding: sp(5)
                                radius: sp(5)
                                md_bg_color: [0,0,0,0]
                                MDBoxLayout:
                                    orientation: 'horizontal'
                                    pos_hint: {'center_x': 0.5,'center_y': 0.5}
                                    MDIcon:
                                        pos_hint: {'center_x': 0.5,'center_y': 0.5}
                                        size_hint: 0.25, None
                                        height: self.width 
                                        icon: 'circle'
                                        theme_text_color: 'Custom'
                                        theme_icon_color: 'Custom'
                                        icon_color: 'red'
                                        text_color: 'red'
                                    MDLabel:
                                        valign: 'center'
                                        halign: 'center'
                                        text: "Pos. Motor"
                                        color: 'white'
                                        font_size: sp(12)
                                MDBoxLayout:
                                    orientation: 'horizontal'
                                    pos_hint: {'center_x': 0.5,'center_y': 0.5}
                                    MDIcon:
                                        pos_hint: {'center_x': 0.5,'center_y': 0.5}
                                        size_hint: 0.25, None
                                        height: self.width 
                                        icon: 'circle'
                                        theme_text_color: 'Custom'
                                        theme_icon_color: 'Custom'
                                        icon_color: 'blue'
                                        text_color: 'blue'
                                    MDLabel:
                                        valign: 'center'
                                        halign: 'center'
                                        text: "Pos. Setpoint"
                                        color: 'white'
                                        font_size: sp(12)
                        #
                        # Zenite Graph 
                        MDFloatLayout:
                            size_hint: 0.5, 1
                            MDCard:
                                pos_hint: {'center_x': 0.5,'top': 1.0 }
                                orientation: 'vertical'
                                #
                                # Title label 
                                MDLabel: 
                                    size_hint: 1, 0.1
                                    text: 'Zenite'
                                    font_style: 'H3'
                                    font_size: 18
                                    bold: True
                                    halign: 'center'
                                #
                                # Graph box     
                                MDBoxLayout:
                                    size_hint: 1, 0.8
                                    pos_hint: { 'rigth' : 1, 'top' : 1 }
                                    md_bg_color: [0,0,0,0]
                                    Graph:
                                        id: zenith_graph
                                        xlabel: 'Time (s)'
                                        ylabel: 'Zenite (º)' 
                                        x_ticks_minor: 5
                                        x_ticks_major: 10
                                        y_ticks_major: 60
                                        y_grid_label: True
                                        x_grid_label: True
                                        padding: 5
                                        x_grid: False
                                        y_grid: True
                                        xmin: -0
                                        xmax: 100
                                        ymin: 0
                                        ymax: 365
                                #
                                # Zenite Slider 
                                MDBoxLayout:
                                    size_hint: 1, 0.10 
                                    orientation: 'horizontal'
                                    padding: sp(50), sp(10), sp(25), sp(10)
                                    MDIcon:
                                        icon: 'arrow-down'
                                        color: 'gray'
                                        size_hint: 0.1, 1
                                        pos_hint: {'center_x': 0.5,'center_y': 0.5}
                                    
                                    MDSlider:
                                        id: zenith_graph_slider 
                                        size_hint: 0.8, 1
                                        hint: True
                                        disabled: True
                                        # disabled: False
                                        step: 0.25
                                        value: 100 
                                        thumb_color_disabled: "gray"
                                        thumb_color_inactive: 'gray'
                                        track_color_active: "gray"
                                        track_color_inactive: "gray"
                                        on_value_pos: root.controller.att_zenith_graph_slider()
                                    

                                    MDIcon:
                                        icon: 'arrow-up'
                                        color: 'gray'
                                        size_hint: 0.1, 1
                                        pos_hint: {'center_x': 0.5,'center_y': 0.5}
                            #
                            # Zenite Legenda
                            MDCard: 
                                size_hint: 0.25, 0.15
                                pos_hint: {'right': 0.375,'top': 0.875}
                                orientation: 'vertical'
                                padding: sp(5)
                                radius: sp(5)
                                md_bg_color: [0,0,0,0]
                                MDBoxLayout:
                                    orientation: 'horizontal'
                                    MDIcon:
                                        pos_hint: {'center_x': 0.5,'center_y': 0.5}
                                        size_hint: 0.25, None
                                        height: self.width 
                                        icon: 'circle'
                                        theme_text_color: 'Custom'
                                        theme_icon_color: 'Custom'
                                        icon_color: 'red'
                                        text_color: 'red'
                                    MDLabel:
                                        pos_hint: {'center_x': 0.5,'center_y': 0.5}
                                        halign: 'center'
                                        valign: 'center'
                                        text: "Pos. Motor"
                                        color: 'white'
                                        font_size: sp(12)
                                MDBoxLayout:
                                    orientation: 'horizontal'
                                    MDIcon:
                                        pos_hint: {'center_x': 0.5,'center_y': 0.5}
                                        size_hint: 0.25, None
                                        height: self.width 
                                        icon: 'circle'
                                        theme_icon_color: 'Custom'
                                        theme_text_color: 'Custom'
                                        icon_color: 'blue'
                                        text_color: 'blue'
                                    MDLabel:
                                        pos_hint: {'center_x': 0.5,'center_y': 0.5}
                                        halign: 'center'
                                        valign: 'center'
                                        text: "Pos. Setpoint"
                                        color: 'white'
                                        font_size: sp(12)


                    # Sistema não conectado
                    #
                    MDCard: 
                        id: graph_system_off 
                        size_hint: 1.0, 0.20
                        pos_hint: {'center_x': 0.50,'center_y': 0.50}
                        md_bg_color: [1,1,1,0.35]
                        radius: 0 
                        MDLabel:
                            size_hint: 1, 1
                            pos_hint: {'center_x': 0.5,'center_y': 0.5}
                            text: "SISTEMA NÃO CONECTADO"
                            color: 'black'
                            font_size: sp(18)
                            halign: 'center'
                            bold: True            
            #
            # #
            # # Connection logs and commands content
            # #
            #
            MDBoxLayout:
                size_hint: 1, 0.5
                orientation: 'horizontal'
                spacing: 10
                padding: 10, 0, 10, 0 
                #
                # Dummy 
                MDLabel:
                    size_hint: None, 1
                    width: sp(90)

                    md_bg_color:'white'
                    text: "Dummy label"
                #
                # #
                # # Painel de comandos
                # #
                #
                MDCard:
                    orientation: 'vertical'
                    size_hint: 0.2, 1
                    md_bg_color: [0.25,0.25,0.25,0.5]
                    spacing: 10 
                    MDLabel: 
                        size_hint: 1, 0.075
                        text: 'Painel de comandos'
                        halign: 'center'
                    MDBoxLayout: 
                        id: commands_scroll   
                        orientation: 'vertical'
                        size_hint: 1, 0.925
                        padding: sp(10),0, sp(10), 0
                        spacing: sp(5)
                        #
                        # Modo de operação 
                        MDCard:
                            orientation: 'vertical'
                            size_hint: 1, 0.15
                            #
                            # # Title 
                            MDLabel:
                                text: "Modo de operação:"
                                halign: 'center'
                                color: 'white'                                    
                                bold: True 
                            #
                            # # Content 
                            MDCard:
                                size_hint: 0.9, None 
                                height: sp(25)
                                pos_hint: {'center_x': 0.50 }
                                orientation: 'horizontal'
                                #
                                # # Checkbox Automatico 
                                MDCheckbox:
                                    id: modo_auto 
                                    group: 'mode'
                                    pos_hint: {'center_x': 0.15 }
                                    disabled_color: app.theme_cls.primary_color
                                    color_inactive: app.theme_cls.primary_color
                                    size_hint: None, None
                                    size: sp(25), sp(25)
                                    active: True
                                    on_state: root.controller.change_operation_mode( "AUTO", self.active ) 
                                MDLabel:
                                    text: "Automatico"
                                    valign: 'center'
                                #
                                # # Checkbox Manual 
                                MDCheckbox:
                                    id: modo_manual 
                                    group: 'mode'
                                    pos_hint: {'center_x': 0.15 }
                                    color_inactive: app.theme_cls.primary_color
                                    disabled_color: app.theme_cls.primary_color
                                    size_hint: None, None
                                    size: sp(25), sp(25)
                                    active: False
                                    on_state: root.controller.change_operation_mode( "MANUAL", self.active  )
                                MDLabel:
                                    text: "Manual"
                                    color: 'white'
                                    valign: 'center'
                        #
                        # Indicações  
                        MDCard:
                            orientation: 'vertical'
                            size_hint: 1, 0.15
                            MDLabel:
                                text: "Motores movendo:"
                                halign: 'center'
                                valign: 'center'
                                color: 'white'                                    
                                bold: True 
                            MDCard: 
                                size_hint: 0.8, None 
                                orientation: 'horizontal'
                                pos_hint: {'center_x': 0.5 }
                                height: sp(25)
                                MDCard:
                                    size_hint: 1, 1
                                    orientation: 'horizontal'
                                    spacing: sp(5)
                                    padding: sp(10),0,0,0
                                    MDIcon:
                                        id: azimuth_moving
                                        pos_hint: {'center_x': 0.15 }
                                        size_hint: None, None
                                        size: sp(35), sp(35)
                                        theme_text_color: 'Custom'
                                        theme_icon_color: 'Custom'
                                        icon: 'circle' 
                                        color: [ 1.0, 0.1, 0.1, 0.75 ]
                                    MDLabel:
                                        text: "Azimute"
                                        valign: 'center'
                                        color: 'gray'
                                MDCard:
                                    size_hint: 1, None 
                                    height: sp(25)
                                    orientation: 'horizontal'
                                    spacing: sp(5)
                                    MDIcon:
                                        id: zenith_moving
                                        pos_hint: {'center_x': 0.15 }
                                        size_hint: None, None
                                        size: sp(35), sp(35)
                                        icon: 'circle'
                                        theme_text_color: 'Custom'
                                        theme_icon_color: 'Custom'
                                        color: [ 1.0, 0.1, 0.1, 0.75 ]
                                    MDLabel:
                                        text: "Zenite"
                                        valign: 'center'
                                        color: 'gray'
                        #
                        # Home  
                        MDCard:
                            orientation: 'vertical'
                            size_hint: 1, 0.20
                            padding: 0, sp(10), 0, sp(10)    
                            MDLabel:
                                size_hint: 1, 0.2
                                text: "Mover para casa:"
                                halign: 'center'
                                color: 'white'                                    
                                bold: True 
                            MDRectangleFlatIconButton:
                                size_hint: 1, 0.7
                                text: "Go home"
                                icon: 'home'
                                pos_hint: {'center_x': 0.5, 'center_y': 0.5 }
                                size_hint: 0.75, 1
                                theme_icon_color: 'Custom'
                                theme_text_color: 'Custom'
                                icon_color: 'green'
                                text_color: 'white'
                                line_color: [1,1,1,0]
                                on_press: root.controller.go_home_system()
                        #
                        # # Velocidades 
                        MDCard:
                            orientation: 'vertical'
                            size_hint: 1, 0.325
                            MDLabel:
                                size_hint: 1, 0.2
                                text: "Velocidade motores:"
                                halign: 'center'
                                color: 'white'
                                bold: True 
                                
                            MDCard:
                                orientation: 'horizontal'
                                spacing: sp(5)
                                padding: sp(10),0,0,0
                                MDLabel: 
                                    size_hint_x: 0.25
                                    text: 'Vel. Azi:'
                                MDTextField:
                                    size_hint_x: 0.75
                                    id: vel_azimute 
                                    pos_hint: {'center_x': 0.5 }
                                    hint_text: '0 - 100 %'
                                    on_text_validate: root.controller.send_motors_vel()
                            MDCard:
                                orientation: 'horizontal'
                                spacing: sp(5)
                                padding: sp(10),0,0,0
                                MDLabel:    
                                    size_hint_x: 0.25
                                    text: 'Vel. Azi:'
                                MDTextField:
                                    size_hint_x: 0.75
                                    id: vel_zenite
                                    pos_hint: {'center_x': 0.5 }
                                    hint_text: '0 - 100 %'
                                    on_text_validate: root.controller.send_motors_vel()
                        #
                        # Estado dos motores  
                        MDCard:
                            orientation: 'vertical'
                            size_hint: 0.95, 0.2
                            MDLabel:
                                text: "Ligar/Desligar motores:"
                                halign: 'center'
                                color: 'white'
                                bold: True 
                            MDSwitch:
                                id: power_widget_switch
                                active: root.controller.get_power_motors()
                                pos_hint: {'center_x': 0.50,'center_y': 0.50}
                                width: self.parent.width*0.4
                                icon_inactive: "close"
                                icon_active: "check"
                                thumb_color_active: "green"
                                thumb_color_inactive: "red"
                                track_color_active: [0.2,1,0.2, 0.6]
                                track_color_inactive:  [1,0.1,0.1, 0.45]
                                on_active: root.controller.turn_on_off_motors( self.active )
                #
                #
                # #
                # # Log da serial 
                # #
                #
                MDStackLayout:
                    size_hint: 0.75, 1
                    # md_bg_color: [0.25,0.25,0.25,0.5]
                    radius: 20
                    spacing: 10 
                    padding: 10 

                    #
                    # Serial monitor
                    MDCard:
                        orientation: 'vertical'
                        size_hint: 0.75, 0.875
                        spacing: 5
                        padding: 5 
                        MDLabel:
                            size_hint: 1, 0.1
                            text: 'Serial monitor:'
                        MDCard:
                            size_hint: 1, 0.9 
                            md_bg_color: 0.1, 0.1, 0.1, 0.5
                            MDScrollView:
                                size_hint: 1, 1
                                md_bg_color: 0.1, 0.1, 0.1, 0.5
                                radius: self.parent.radius
                                MDCard:
                                    id: serial_monitor
                                    size_hint: 1, None
                                    height: dp( 500 )
                                    orientation: 'vertical'
                                    pos_hint: {'center_x': 0.5,'top': 1.0}
                                    padding: sp(10) 
                                    spacing: sp(25)
                    #
                    # Serial monitor
                    MDCard:
                        orientation: 'vertical'
                        size_hint: 0.25, 0.875
                        spacing: 5
                        radius: 15
                        padding: 5 
                        MDLabel:
                            size_hint: 1, 0.1
                            text: 'Lista de comandos:'
                        MDScrollView:
                            size_hint: 1, 0.9 
                            radius: self.parent.radius
                            md_bg_color: 0.1, 0.1, 0.1, 0.5
                            MDCard:
                                size_hint: 1, None
                                height: dp( 350 )
                                orientation: 'vertical'
                                pos_hint: {'center_x': 0.5,'top': 1.0}
                                padding: sp(10) 
                                spacing: sp(25)
                                MDLabel:
                                    text: "Comandos de leitura:"
                                    color: 'white'
                                    bold: True
                                MDLabel:
                                    text: "Para ler Discrete Input use:"
                                    markup: True
                                    color: 'gray'
                                MDLabel:
                                    text: "[ref=DISC][u]RD  ID  DISC  REG  QNT[/u][/ref]"
                                    on_ref_press: prompt_commandos.text = 'RD  ID  DISC  REG  QNT'
                                    haling: 'center'
                                    font_size: sp(12)
                                    color: 'gray'
                                    markup: True
                                MDLabel:
                                    text: "Para ler Coil Register use:"
                                    color: 'gray'
                                    markup: True
                                MDLabel:
                                    text: "[ref=COIL][u]RD  ID  COIL  REG  QNT[/u][/ref]"
                                    on_ref_press: prompt_commandos.text = 'RD  ID  COIL  REG  QNT'
                                    haling: 'center'
                                    font_size: sp(12)
                                    color: 'gray'
                                    markup: True
                                MDLabel:
                                    text: "Para ler Holding Register use:"
                                    color: 'gray'
                                    markup: True
                                MDLabel:
                                    text: "[ref=HOLD][u]RD  ID  HOLD  REG  QNT[/u][/ref]"
                                    on_ref_press: prompt_commandos.text = 'RD  ID  HOLD  REG  QNT'
                                    haling: 'center'
                                    font_size: sp(12)
                                    color: 'gray'
                                    markup: True                              
                                MDLabel:
                                    text: "Para ler Analog Input use:"
                                    color: 'gray'
                                    markup: True
                                MDLabel:
                                    text: "[ref=ANAG][u]RD  ID  ANAG  REG  QNT[/u][/ref]"
                                    on_ref_press: prompt_commandos.text = 'RD  ID  ANAG  REG  QNT'
                                    haling: 'center'
                                    font_size: sp(12)
                                    color: 'gray'
                                    markup: True                                
                                
                                MDLabel:
                                    text: "Comandos de escrita:"
                                    color: 'white'
                                    bold: True
                                MDLabel:
                                    text: "Para ler Coil Register use:"
                                    markup: True
                                    color: 'gray'
                                MDLabel:
                                    text: "[ref=COIL][u]WR  ID  COIL  REG  VALUE[/u][/ref]"
                                    on_ref_press: prompt_commandos.text = 'WR  ID  COIL  REG  QNT'
                                    haling: 'center'
                                    font_size: sp(12)
                                    color: 'gray'
                                    markup: True                                
                                MDLabel:
                                    text: "Para escrever Holding Register use:"
                                    markup: True
                                    color: 'gray'
                                MDLabel:
                                    text: "[ref=HOLD][u]WR  ID  HOLD  REG  VALUE[/u][/ref]"
                                    on_ref_press: prompt_commandos.text = 'WR  ID  HOLD  REG  QNT'
                                    haling: 'center'
                                    font_size: sp(12)
                                    color: 'gray'
                                    markup: True
                    #
                    # Serial monitor
                    MDCard:
                        orientation: 'horizontal'
                        size_hint: 1, 0.1
                        MDLabel:
                            size_hint: 0.15, 1 
                            text: 'Enviar Comandos:'
                        MDTextField:
                            id: prompt_commandos
                            size_hint: 0.75, 1.5
                        MDIconButton:
                            size_hint: 0.1, 1 
                            icon: 'send'
                            on_press: print( 'press aquii oh')

                        
                        

